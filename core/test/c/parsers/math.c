/*
 * Generated by libtree-sitter
 */

#include <tree_sitter/runtime.h>
#include <ctype.h>

typedef enum {
  node_type_expr,
  node_type_term,
  node_type_factor,
  node_type_number,
  node_type_variable
} NodeType;

static const char *rule_names[5] = {
  "expr",
  "term",
  "factor",
  "number",
  "variable"
};

TSTree * ts_parse_math(const char *input)
{
  char lookahead_char;
  NodeType lookahead_sym;
  TSTree *tree = ts_tree_new(rule_names);
  TSParser *p = ts_parser_new(tree, input);

next_state:
  lookahead_char = ts_parser_lookahead(p);
  switch (ts_parser_state(p)) {
    case 1:
    {
      if (lookahead_sym == node_type_expr) {
        ts_parser_push_state(p, 2);
        goto next_state;
      }
      if (lookahead_sym == node_type_term) {
        ts_parser_push_state(p, 4);
        goto next_state;
      }
      if (lookahead_sym == node_type_factor) {
        ts_parser_push_state(p, 6);
        goto next_state;
      }
      if (lookahead_sym == node_type_number) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_sym == node_type_variable) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_char == '(') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 8);
        goto next_state;
      }
      if (isdigit(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 10);
        goto next_state;
      }
      if (isalnum(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 11);
        goto next_state;
      }
      break;
    }

    case 2:
    {
      if (lookahead_char == '+') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 3);
        goto next_state;
      }
      goto accept;
      break;
    }

    case 3:
    {
      if (lookahead_sym == node_type_term) {
        ts_parser_push_state(p, 4);
        goto next_state;
      }
      if (lookahead_sym == node_type_factor) {
        ts_parser_push_state(p, 6);
        goto next_state;
      }
      if (lookahead_sym == node_type_number) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_sym == node_type_variable) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_char == '(') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 8);
        goto next_state;
      }
      if (isdigit(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 10);
        goto next_state;
      }
      if (isalnum(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 11);
        goto next_state;
      }
      break;
    }

    case 4:
    {
      if (lookahead_char == '*') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 5);
        goto next_state;
      }
      ts_parser_reduce(p, 1, node_type_expr);
      break;
    }

    case 5:
    {
      if (lookahead_sym == node_type_factor) {
        ts_parser_push_state(p, 6);
        goto next_state;
      }
      if (lookahead_sym == node_type_number) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_sym == node_type_variable) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_char == '(') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 8);
        goto next_state;
      }
      if (isdigit(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 10);
        goto next_state;
      }
      if (isalnum(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 11);
        goto next_state;
      }
      break;
    }

    case 6:
    {
      ts_parser_reduce(p, 1, node_type_term);
      break;
    }

    case 7:
    {
      ts_parser_reduce(p, 1, node_type_factor);
      break;
    }

    case 8:
    {
      if (lookahead_sym == node_type_expr) {
        ts_parser_push_state(p, 9);
        goto next_state;
      }
      if (lookahead_sym == node_type_term) {
        ts_parser_push_state(p, 4);
        goto next_state;
      }
      if (lookahead_sym == node_type_factor) {
        ts_parser_push_state(p, 6);
        goto next_state;
      }
      if (lookahead_sym == node_type_number) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_sym == node_type_variable) {
        ts_parser_push_state(p, 7);
        goto next_state;
      }
      if (lookahead_char == '(') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 8);
        goto next_state;
      }
      if (isdigit(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 10);
        goto next_state;
      }
      if (isalnum(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 11);
        goto next_state;
      }
      break;
    }

    case 9:
    {
      if (lookahead_char == ')') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 7);
        goto next_state;
      }
      if (lookahead_char == '+') {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 3);
        goto next_state;
      }
      break;
    }

    case 10:
    {
      if (isdigit(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 10);
        goto next_state;
      }
      ts_parser_reduce(p, 1, node_type_number);
      break;
    }

    case 11:
    {
      if (isalnum(lookahead_char)) {
        ts_parser_consume(p);
        ts_parser_replace_state(p, 11);
        goto next_state;
      }
      ts_parser_reduce(p, 1, node_type_variable);
      break;
    }
  }

accept:
  return tree;
}
